<%- include('../layouts/header') %>
<main>
    <% if (hasProducts) { %>
    <div class="grid">
        <% prods.forEach(product => { %>
        <article class="card product-item">
            <header class="card__header">
                <h1 class="product__title"><%= product.title %></h1>
            </header>
            <div class="card__image">
                <img src="<%= product.imageUrl %>" alt="A Book">
            </div>
            <div class="card__content">
                <h2 class="product__price"><%= product.price %> </h2>
                <p class="product__description"><%= product.description %></p>
            </div>
            <div class="card__actions">
                <a href="<%= 'products/'+ product._id %> " class="btn">Details</a>
                <% if (isAuthenticated) { %>
                <%- include('../layouts/add-to-cart', {product}) %>
                <% } %>
            </div>
        </article>
        <% }); %>
    </div>
    <%- include('../layouts/pagination', {
        currentPage, nextPage, previousPage, lastPage, hasNextPage, hasPreviousPage
    }) %>
    <% }else{ %>
    <h1>No Products</h1>
    <% } %>
</main>
<%- include('../layouts/footer') %>